{"data":{"site":{"siteMetadata":{"title":"FENews","author":"Kyle Mathews"}},"markdownRemark":{"id":"935b0b20-5692-57c6-a524-97f69ae86742","excerpt":"React Hooks 是一个闪亮的新 提案 ，将优化 90% 的 React 代码。 根据  Dan Abramov  的说法， Hooks  是 React 的未来。 这听起来不错，但什么是 Hooks，它们将如何帮助我编写更好的代码？ 很高兴你这么问。 Hooks…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/5be9e/react-hooks-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAB9UlEQVQ4y61Sy27TUBC99nVi5+E2qmtioFQVkaWohKShSU2Ut6gCKQJ1EUBRkdh0wwKBBAKxAhZIldjxv/gwM8SWU2XJ4njmzvPMjJVlWX/+J1Qul4PAspDqWWywWxmbdc2vVsaYZGxpHWtDia6VilM7ySyytuv+hCE/YJfKKN8IoE0D7s095PL5jSwk1rYFiS+RShTbjg2lELQf4uDRM9RfXWJ//AQ74SHYnqfEbCFFtvl8jtFoJHp+1Xh9ZDIeXrxF8/Ijoq+/RN49ewFaAQzThEngWK21FOl0OhgOh6Lbq4b/ClIhk/a1P5kjPH+Nk89X6H37jQfvv6P29CX8owiBt4NqEEiy7/tStF6vI4qitGA6sjDUZuwGt3HvzTt0Pv3EyZcrkeH5BWx3C/7uLjwCJ08mE9RqNYRhiH6/v4EhfWhHMTv2+qc4OH2O4w8/cGc4k52yXVN3ZmUYBgJiulwusVgsUKlU0lWsHYV3qMlRrt6Cf/8YznYFVRrV2dom9lqC9Upyg1KphEKhIA2yxcTPdB3HieWSnEQJDl+NJBfjwGKxCNd1pQiDWVGOQCak+JSh53l8sXgwGKDb7WI2e4zxeIyjdhu9Xg/NZlOWz79Jq9XCdDqVd6PRAOfwmy++dhRmmHRkBiy5a1ZPwG9mnOhJTDLyX/5RPC2yGNTdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"react hooks 1\"\n        title=\"\"\n        src=\"/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/623ee/react-hooks-1.png\"\n        srcset=\"/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/816c5/react-hooks-1.png 148w,\n/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/c766b/react-hooks-1.png 295w,\n/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/623ee/react-hooks-1.png 590w,\n/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/e5345/react-hooks-1.png 885w,\n/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/7a439/react-hooks-1.png 1180w,\n/static/38bb9ba0e6d73dd7c56c53971f5ffcfb/5be9e/react-hooks-1.png 1600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>React Hooks 是一个闪亮的新<a href=\"https://www.youtube.com/watch?v=dpw9EHDh2bM&#x26;t=54s\">提案</a>，将优化 90% 的 React 代码。 根据 <a href=\"https://overreacted.io/\">Dan Abramov</a> 的说法，<a href=\"https://reactjs.org/docs/hooks-intro.html\">Hooks</a> 是 React 的未来。</p>\n<p>这听起来不错，但什么是 Hooks，它们将如何帮助我编写更好的代码？ 很高兴你这么问。</p>\n<p>Hooks 允许你访问函数组件中的状态和生命周期方法。 如果前面这句话对你来说很陌生，那么你应该<a href=\"https://medium.freecodecamp.org/the-react-handbook-b71c27b0a795#b70b\">在这里</a>更新关于 React 的记忆。</p>\n<p>React 团队说，它将帮助你编写没有有状态组件包袱的干净的代码。 在使用 Hooks 实现了一个准系统表单之后，我同意了他们的观点。</p>\n<p>让我们首先在有状态组件中写一个简单的表单，我们将使用 Hooks 重写该表单，你可以决定更喜欢哪种。</p>\n<h3>设置</h3>\n<p>访问 <a href=\"https://codesandbox.io/\">codesandbox.io</a>，创建一个帐户，登录，并创建一个新的 sandbox ，当创建 sandbox 时选择 React。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/5be9e/react-hooks-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.4375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABeklEQVQozzWQy24UMRBF+xtQ2q63X/2a6dEk9CSQsIJIKEKRkPiRLFmGNWt+mJohWKWSVbLvrXu6Ms11mq1UtEQiCID/DgCrkSW+FP6/vJWa925KtZQqljNxOW77px/zl2/L4/Py9buOczIhURetJaEoqgIL+KRkUutuwDQiIJ2i7B6fP7/++fTy+uHl1+3P3/W4HeYciCLS3b6CCLfSB4jCuI4u2vWiIMZiwfcsLe+P5bDl/XVbP7LlGHFSbWbvPIcymiCSO7VwDtX1pKQ5ie9B5wUQhTKBFD0oa2Leaj20GhJTEhpNgRhpBTe2blyWabdLrQUmMvNIpC5nqOwdJPVikZXQSIzcyblaim/A2jVL8lqHe7V8czqlVFzWJ2RcVgZwUZ7uLpmHFlkiMzV/Yx1rjuAxeB42t7VcroDOYNnBMiYOkZxQOWbf1OchxugB6+XzEKp/Hped45iZQoSn98eBtUTqEber7AyCQB8wth7qyKcHaFN0GmZ/AWLzRD7+aQjVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"从模板列表中选择 React\"\n        title=\"\"\n        src=\"/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/623ee/react-hooks-2.png\"\n        srcset=\"/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/816c5/react-hooks-2.png 148w,\n/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/c766b/react-hooks-2.png 295w,\n/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/623ee/react-hooks-2.png 590w,\n/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/e5345/react-hooks-2.png 885w,\n/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/7a439/react-hooks-2.png 1180w,\n/static/e2c1ec656aa2ec5350bc9c98d7f53c2e/5be9e/react-hooks-2.png 1600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>现在 sandbox 打开了，我们必须确保使用支持 Hooks 的 React 版本。因为Hooks现在在 React v16.8的公开稳定版本。</p>\n<p>查看 sandbox 左侧的文件编辑器，然后:</p>\n<ul>\n<li>点击依赖项 ‘Dependencies’</li>\n<li>查看 ‘react’ 和‘react-dom’ 的版本是否低于 16.8，低于则点击更新到最新版本</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38f2ba0adbfa12290ae6d781ad9381b5/6d85c/react-hooks-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.78947368421053%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGQxhURIfD/xAAbEAACAQUAAAAAAAAAAAAAAAACAwEABDEyM//aAAgBAQABBQKlplkEkhks2vN23//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAQACAwAAAAAAAAAAAAAAAAARgQEQQf/aAAgBAQAGPwJOIc1an//EABsQAAIDAAMAAAAAAAAAAAAAAAABESExQWGx/9oACAEBAAE/IXXZJRL5I03iTU9hmP/aAAwDAQACAAMAAAAQX/8A/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QR//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFBofAxsfH/2gAIAQEAAT8QdhwjSYY7PWKD3cIPr4L7qcuAtj5E4b2z/9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"请务必选择高于 16.8 版本\"\n        title=\"\"\n        src=\"/static/38f2ba0adbfa12290ae6d781ad9381b5/623ee/react-hooks-3.png\"\n        srcset=\"/static/38f2ba0adbfa12290ae6d781ad9381b5/816c5/react-hooks-3.png 148w,\n/static/38f2ba0adbfa12290ae6d781ad9381b5/c766b/react-hooks-3.png 295w,\n/static/38f2ba0adbfa12290ae6d781ad9381b5/623ee/react-hooks-3.png 590w,\n/static/38f2ba0adbfa12290ae6d781ad9381b5/e5345/react-hooks-3.png 885w,\n/static/38f2ba0adbfa12290ae6d781ad9381b5/7a439/react-hooks-3.png 1180w,\n/static/38f2ba0adbfa12290ae6d781ad9381b5/84fe0/react-hooks-3.png 1770w,\n/static/38f2ba0adbfa12290ae6d781ad9381b5/6d85c/react-hooks-3.png 1900w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3>代码</h3>\n<p>现在我们已经完成了设置，是时候编写一些代码了。 跳到你创建的 sandbox ，创建一个名为 Form.jsx 的新文件，并粘贴下面的代码:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Form</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      firstName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n      lastName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">handleInputChange</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> firstName<span class=\"token punctuation\">,</span> lastName<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> password <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>form<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input\n          value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span>\n          onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"First name\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span>\n          name<span class=\"token operator\">=</span><span class=\"token string\">\"firstName\"</span>\n          required\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input\n          value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span>\n          onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Last name\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span>\n          name<span class=\"token operator\">=</span><span class=\"token string\">\"lastName\"</span>\n          required\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input\n          value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>email<span class=\"token punctuation\">}</span>\n          onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Email address\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span>\n          name<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span>\n          required\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input\n          value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>password<span class=\"token punctuation\">}</span>\n          onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Password\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span>\n          name<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span>\n          required\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span>Submit<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Form<span class=\"token punctuation\">;</span></code></pre></div>\n<p>现在打开 index.js，用下面的代码替换内容:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Form <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Form.jsx\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"./styles.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token constant\">A</span> Simple Form <span class=\"token keyword\">in</span> React<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Form <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> rootElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>测试表单，看看是否一切正常。 这就是在 React 中实现受控表单的”老派”方式。</p>\n<p>注意设置状态所需的样板文件的数量，以及在每次输入更改时更新状态的方法。</p>\n<p>让我们使用 React Hooks (终于到了!)编写相同的表单 ，但是首先，删除 Form.jsx 中所有代码，让我们重新开始。</p>\n<p>首先在文件顶部添加以下行:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>所以这里引入了一个陌生的方法，叫做 <code class=\"language-text\">useState</code>。 它是什么，我们如何使用它？</p>\n<p>嗯，<code class=\"language-text\">useState</code> 是 React Hook 允许我们访问和操作组件中的状态。 这意味着我们不必像以前那样 <code class=\"language-text\">extend Component</code> 。</p>\n<p>这是来到 React API 的几个新的 Hooks 之一，它可以帮助我们编写更清晰的代码。 现在让我们使用它。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"./styles.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>firstName<span class=\"token punctuation\">,</span> setFirstName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>lastName<span class=\"token punctuation\">,</span> setLastName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>email<span class=\"token punctuation\">,</span> setEmail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>password<span class=\"token punctuation\">,</span> setPassword<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>form<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input\n        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span>\n        onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>e <span class=\"token operator\">=></span> <span class=\"token function\">setFirstName</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"First name\"</span>\n        type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"firstName\"</span>\n        required\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input\n        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span>\n        onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>e <span class=\"token operator\">=></span> <span class=\"token function\">setLastName</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Last name\"</span>\n        type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"lastName\"</span>\n        required\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input\n        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>email<span class=\"token punctuation\">}</span>\n        onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>e <span class=\"token operator\">=></span> <span class=\"token function\">setEmail</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Email address\"</span>\n        type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span>\n        required\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input\n        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>password<span class=\"token punctuation\">}</span>\n        onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>e <span class=\"token operator\">=></span> <span class=\"token function\">setPassword</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Password\"</span>\n        type<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span>\n        required\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span>Submit<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Form<span class=\"token punctuation\">;</span></code></pre></div>\n<p>我们已经创建了函数组件，但是还有一些不熟悉的代码需要解释，特别是组件顶部的四个声明。</p>\n<p>虽然这一部分代码起初看起来很奇怪，但是它很容易理解。 我们不再声明一个名为 <code class=\"language-text\">state</code> 的对象来保存组件的状态。 相反，我们现在将 <code class=\"language-text\">state</code> 划分为多个声明。</p>\n<p>如果我们想以熟悉的<code class=\"language-text\">extends React.Component</code>的方式来声明一个名为 <code class=\"language-text\">firstName</code> 的状态变量，我们通常会在构造函数中声明它，然后通过写入<code class=\"language-text\">this.state.firstName</code> 来访问它。</p>\n<p>但是使用 <code class=\"language-text\">useState</code>，我们可以初始化两个名为 <code class=\"language-text\">firstName</code> 和 <code class=\"language-text\">setFirstName</code> 的变量，让它们的值通过 <code class=\"language-text\">useState()</code> 返回。</p>\n<p>为什么我们还要声明 <code class=\"language-text\">setFirstName</code> 呢？</p>\n<p>因为这是一个函数组件，所以我们没有 <code class=\"language-text\">setState</code> 来帮助我们修改状态变量的值。 我们只有 <code class=\"language-text\">setFirstName</code>，它的唯一目的就是在每次调用它时更新 <code class=\"language-text\">firstName</code>。</p>\n<p>所以当你看到:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>firstName<span class=\"token punctuation\">,</span> setFirstName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>我们基本上是声明一个状态变量和一个函数，以允许我们稍后修改状态变量。 <code class=\"language-text\">useState</code> 调用中的空字符串是 <code class=\"language-text\">firstName</code> 的初始值，可以设置为任何需要的值。 现在我们将它设置为空字符串。</p>\n<p>注意，你可以随心所欲地为 <code class=\"language-text\">setFirstName</code> 函数命名。 然而，有一个约定，在我们要修改的状态变量的名称之前附加‘set’。</p>\n<p>现在我们知道了如何在函数组件中创建状态变量以及如何更新它。 下面让我们继续解释代码的其余部分。</p>\n<p>在第一个输入标记中，我们将其值设置为在组件顶部声明的状态变量。 至于 <code class=\"language-text\">onChange</code> 处理程序，我们将它设置为一个<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\">箭头函数</a>，为我们更新状态变量的函数。</p>\n<p>我们在以前的类组件中有一个名为 <code class=\"language-text\">handleInputChange</code> 的方法，现在有一个匿名函数为我们更新状态。</p>\n<p>通过尝试在表单中输入文本来检查一切是否正常工作。 如果一切正常，恭喜你，你刚刚使用了一个 React Hook。 如果没有，那么再看一遍本教程，确保你没有跳过任何说明。</p>\n<p>添加你认为合适好看的样式。</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.24463519313305%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1SqI0Kif/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAMUEwL/2gAIAQEAAQUCnUYcGKytZYssWf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAMBAQAAAAAAAAAAAAAAAAACMTIB/9oACAEBAAY/AsKYUzwjEYjH/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAER0fExQXGRwf/aAAgBAQABPyF7HUSqHHwNmpND8lZi1Zi1Z//aAAwDAQACAAMAAAAQ0/8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EGR//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EG1//8QAGhABAAIDAQAAAAAAAAAAAAAAAQARECFhMf/aAAgBAQABPxAdb3YSEA2CvYvanpNoyjBk/9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"最终产品\"\n        title=\"\"\n        src=\"/static/c4633fc3b707667ab08a8543ab3326d6/623ee/react-hooks-4.png\"\n        srcset=\"/static/c4633fc3b707667ab08a8543ab3326d6/816c5/react-hooks-4.png 148w,\n/static/c4633fc3b707667ab08a8543ab3326d6/c766b/react-hooks-4.png 295w,\n/static/c4633fc3b707667ab08a8543ab3326d6/623ee/react-hooks-4.png 590w,\n/static/c4633fc3b707667ab08a8543ab3326d6/e5345/react-hooks-4.png 885w,\n/static/c4633fc3b707667ab08a8543ab3326d6/7a439/react-hooks-4.png 1180w,\n/static/c4633fc3b707667ab08a8543ab3326d6/84fe0/react-hooks-4.png 1770w,\n/static/c4633fc3b707667ab08a8543ab3326d6/a2e09/react-hooks-4.png 2796w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n详见链接<a href=\"https://codesandbox.io/s/pp3rp9lqzj?from-embed\">https://codesandbox.io/s/pp3rp9lqzj?from-embed</a></p>\n<h3>反思</h3>\n<p>更新: 一些人可能对在 <code class=\"language-text\">onClick</code> 处理程序中使用内联函数的想法感到震惊。 我给 Dan Abramov 发了一条推特，他回复了 <a href=\"https://reactjs.org/docs/hooks-intro.html\">Hooks 文档的这一部分</a>，解释了为什么在 Hooks 中使用内联函数并不是一件坏事。</p>\n<p>通过检查我们的新代码并将其与旧代码进行比较，很明显 <code class=\"language-text\">React Hooks</code> 可以帮助我们编写更好的代码。</p>\n<p>将类组件和函数组件并排进行比较，可以清楚地看到，函数组件更容易推理，使用更少的代码，而且通常看起来更整洁。</p>\n<p>如果你喜欢 <code class=\"language-text\">React Hooks</code>，你可以通过浏览官方文档并尝试使用它们重新实现一些项目来了解更多。</p>\n<p>也就是说，我想听听你的想法。 你认为 <code class=\"language-text\">Hooks</code> 是 <code class=\"language-text\">React</code> 的未来，还是你觉得他们只是不必要的噱头？ 请在下面留下评论。</p>\n<p>本文首发于 <a href=\"https://medium.com/the-andela-way/how-to-get-started-with-react-hooks-controlled-forms-9b47e9fb8c8d\">The Andela Way</a>。</p>\n<p>原文地址：<a href=\"https://medium.freecodecamp.org/how-to-get-started-with-react-hooks-controlled-forms-826c99943b92\">https://medium.freecodecamp.org/how-to-get-started-with-react-hooks-controlled-forms-826c99943b92</a></p>","frontmatter":{"title":"如何在受控表单组件上使用 React Hooks","date":"March 08, 2019","description":""}}},"pageContext":{"slug":"/2019-03-03---how-to-get-started-with-react-hooks-controlled-forms/","previous":{"fields":{"slug":"/2019-02-27---computer-science-in-javascript-doubly-linked-lists/"},"frontmatter":{"title":"JavaScript 中的计算机科学：双向链表"}},"next":{"fields":{"slug":"/2019-03-05---javascript-timers-everything-you-need-to-know/"},"frontmatter":{"title":"关于JavaScript timer你需要了解的知识"}}}}