{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"c7865750-4236-5d4a-99c1-637311fc2110","excerpt":"在我之前的一篇  文章  中，讨论了在 JavaScript…","html":"<p>在我之前的一篇 <a href=\"https://humanwhocodes.com/blog/2019/01/computer-science-in-javascript-linked-list/\">文章</a> 中，讨论了在 JavaScript 中创建单向链表（如果您还未读过之前那篇文章，我建议您先去阅读一下）。单向链表由节点组成，每个节点都有一个指向列表中后一个节点的指针。单向链表的操作通常需要遍历整个列表，所以性能一般较差。而在链表中每个节点上添加指向前一个节点的指针可以提高其性能。每个节点有分别指向前一个节点和后一个节点的指针的链表就称为双向链表。</p>\n<h3>双向链表的设计</h3>\n<p>与单向链表一样，双向链表也是由一系列节点组成。每一个节点包含数据域、指向后一个节点的指针以及指向前一个节点的指针。这里看一个在 JavaScript 中简单应用的例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DoublyLinkedListNode</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>previous <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>在 <code class=\"language-text\">DoublyLinkedListNode</code> 类中，属性 <code class=\"language-text\">data</code> 包含链表项存储的值，属性 <code class=\"language-text\">next</code> 是指向列表中后一项的指针，而属性 <code class=\"language-text\">previous</code> 是指向列表中前一项的指针。<code class=\"language-text\">next</code> 和 <code class=\"language-text\">previous</code> 指针初始都为 <code class=\"language-text\">null</code> ，因为在类实例化时后一个节点和前一个节点都还未知。您可以像下面这样使用 <code class=\"language-text\">DoublyLinkedListNode</code> 类创建双向链表：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// create the first node</span>\n<span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DoublyLinkedListNode</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// add a second node</span>\n<span class=\"token keyword\">const</span> secondNode <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DoublyLinkedListNode</span><span class=\"token punctuation\">(</span><span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhead<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> secondNode<span class=\"token punctuation\">;</span>\nsecondNode<span class=\"token punctuation\">.</span>previous <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// add a third node</span>\n<span class=\"token keyword\">const</span> thirdNode <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DoublyLinkedListNode</span><span class=\"token punctuation\">(</span><span class=\"token number\">37</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsecondNode<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> thirdNode<span class=\"token punctuation\">;</span>\nthirdNode<span class=\"token punctuation\">.</span>previous <span class=\"token operator\">=</span> secondNode<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> tail <span class=\"token operator\">=</span> thirdNode<span class=\"token punctuation\">;</span></code></pre></div>\n<p>同样与单向链表一样，双向链表中的第一个节点称为头节点，然后分别给后面的第二个和第三个节点设置 <code class=\"language-text\">next</code> 和 <code class=\"language-text\">previous</code> 。这样就生成了如下图所示的数据结构：</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3acd96ffa409636d8b48d51fffbf2c50/49cda/Doubly-linked-list.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 6.721311475409836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAL0lEQVQI12NgYGBQA2J9IJYFYk0gNgBiXSA2BGIjJGwGxHpQbISkThuI5aFmyAEAiGgDeLtWaJMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"双向链表数据结构\"\n        title=\"\"\n        src=\"/static/3acd96ffa409636d8b48d51fffbf2c50/623ee/Doubly-linked-list.png\"\n        srcset=\"/static/3acd96ffa409636d8b48d51fffbf2c50/816c5/Doubly-linked-list.png 148w,\n/static/3acd96ffa409636d8b48d51fffbf2c50/c766b/Doubly-linked-list.png 295w,\n/static/3acd96ffa409636d8b48d51fffbf2c50/623ee/Doubly-linked-list.png 590w,\n/static/3acd96ffa409636d8b48d51fffbf2c50/e5345/Doubly-linked-list.png 885w,\n/static/3acd96ffa409636d8b48d51fffbf2c50/7a439/Doubly-linked-list.png 1180w,\n/static/3acd96ffa409636d8b48d51fffbf2c50/49cda/Doubly-linked-list.png 1220w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>您可以访问每个节点上的 <code class=\"language-text\">next</code> ，以与单向链表相同的方式遍历双向链表，例如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> current <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    current <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>双向链表通常也跟踪列表中最后一个节点，这个节点被称作尾节点。尾节点更便于新节点的插入以及从尾节点开始访问 <code class=\"language-text\">previous</code> 来实现链表逆向查找。执行下面的代码，控制台依次输出双向链表反向遍历之后的每一个值：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> current <span class=\"token operator\">=</span> tail<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    current <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>previous<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>双向链表相较于单向链表的一个优势在于可以双向遍历列表。</p>\n<h2>DoublyLinkedList 类</h2>\n<p>与单链表一样，双向链表中节点的操作最好封装在一个类中。这里有一个简单的例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"head\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> tail <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tail\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DoublyLinkedList</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>双向链表 <code class=\"language-text\">DoublyLinkedList</code> 类包含与链表中数据进行交互的方法。属性 <code class=\"language-text\">head</code> 和 <code class=\"language-text\">tail</code> 分别用于定位列表中的第一个和最后一个节点。与单链表一样，<code class=\"language-text\">head</code> 和 <code class=\"language-text\">tail</code> 不推荐在类外访问。</p>\n<h3>双向链表中数据的添加</h3>\n<p>将元素添加到双向链表和添加到单向链表非常类似。在这两种数据结构中，都需要先找到列表中最后一个节点，然后在其后面添加一个新节点。在单向链表中，必须要遍历整个列表以定位最后一个节点，而在双向链表中，直接使用 <code class=\"language-text\">this[tail]</code> 定位最后一个节点。以下是 <code class=\"language-text\">DoublyLinkedList</code> 类的 <code class=\"language-text\">add()</code> 方法：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DoublyLinkedList</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">// create the new node and place the data in it</span>\n        <span class=\"token keyword\">const</span> newNode <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DoublyLinkedListNode</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// special case: no nodes in the list yet</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newNode<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\">// link the current tail and new tail</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> newNode<span class=\"token punctuation\">;</span>\n            newNode<span class=\"token punctuation\">.</span>previous <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// reassign the tail to be the new node</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newNode<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>双向链表的 <code class=\"language-text\">add()</code> 方法接受一个参数，即要插入列表的数据。如果列表为空（<code class=\"language-text\">this[head]</code> 和 <code class=\"language-text\">[tail]</code> 都为 <code class=\"language-text\">null</code>），则将新节点赋值给 <code class=\"language-text\">this[head]</code>。如果列表不为空，则在 <code class=\"language-text\">this[tail]</code> 节点之后添加新节点。最后一步设置 <code class=\"language-text\">this[tail]</code> 为 <code class=\"language-text\">newNode</code>，因为在空列表和非空列表中，新节点都是最后一个节点。</p>\n<p>需要注意的是，在空列表的情况下，<code class=\"language-text\">this[head]</code> 和 <code class=\"language-text\">this[tail]</code> 为同一节点。因为在只有一个节点的列表中，该节点既是列表的第一个节点，也是最后一个节点。定位列表尾节点非常重要，这样必要时可以反向遍历列表。</p>\n<p>双向链表 <code class=\"language-text\">add()</code> 方法的复杂性是O(1)。对于空列表和非空列表，该操作都不需要任何遍历，因此它比单向链表的 <code class=\"language-text\">add()</code> 简单很多。</p>\n<h3>双向链表中数据的查找</h3>\n<p>双向链表的 <code class=\"language-text\">get()</code> 方法与单链表的 <code class=\"language-text\">get()</code> 方法完全相同。两种情况下，都必须从 <code class=\"language-text\">this[head]</code> 开始遍历列表定位目标节点：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DoublyLinkedList</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// other methods hidden for clarity</span>\n\n    <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">// ensure `index` is a positive value</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\">// the pointer to use for traversal</span>\n            <span class=\"token keyword\">let</span> current <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// used to keep track of where in the list you are</span>\n            <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// traverse the list until you reach either the end or the index</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                current <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span>\n                i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// return the data if `current` isn't null</span>\n            <span class=\"token keyword\">return</span> current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> current<span class=\"token punctuation\">.</span>data <span class=\"token punctuation\">:</span> undefined<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> undefined<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>强调一下，对于单向链表，<code class=\"language-text\">get()</code> 方法的复杂性范围从排除第一个节点时的O(1)（无需遍历列表）到排除最后一个节点时的O(n)（需遍历整个列表）。</p>\n<h3>双向链表中数据的删除</h3>\n<p>从双向链表中删除数据与单链表基本相同：首先遍历列表找到需要删除的节点（与 <code class=\"language-text\">get()</code> 相同），然后将其从列表中删除。它与单向链表的不同点：</p>\n<p>   1、在循环中不需要先定位后一个节点去查找前一个节点，前一个节点可以通过 <code class=\"language-text\">current.previous</code> 获取。</p>\n<p>   2、需要监听列表中最后一个节点是否变化，以确保 <code class=\"language-text\">this[tail]</code> 正确。</p>\n<p>因此，双向链表 <code class=\"language-text\">remove()</code> 方法与单向链表看起来非常类似：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DoublyLinkedList</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// other methods hidden for clarity</span>\n\n    <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">// special cases: no nodes in the list or `index` is negative</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RangeError</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`Index </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> does not exist in the list.`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// special case: removing the first node</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\">// store the data from the current head</span>\n            <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// just replace the head with the next node in the list</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// special case: there was only one node, so also reset `this[tail]`</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>previous <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// return the data at the previous head of the list</span>\n            <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// pointer use to traverse the list</span>\n        <span class=\"token keyword\">let</span> current <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>head<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// used to track how deep into the list you are</span>\n        <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// same loop as in `get()`</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\">// traverse to the next node</span>\n            current <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// increment the count</span>\n            i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// if node was found, remove it</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n            <span class=\"token comment\">// skip over the node to remove</span>\n            current<span class=\"token punctuation\">.</span>previous<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// special case: this is the last node so reset `this[tail]`.</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>previous<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                current<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">.</span>previous <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>previous<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// return the value that was just removed from the list</span>\n            <span class=\"token keyword\">return</span> current<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// if node wasn't found, throw an error</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RangeError</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`Index </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> does not exist in the list.`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>当 index 为 0 时，意味着第一个节点将要被删除，与单向链表一样把 <code class=\"language-text\">this[head]</code> 设置为 <code class=\"language-text\">this[head].next</code>。当你需要更新其他指针时，这时差异就会出现。列表中如果只有一个节点，则需要将 <code class=\"language-text\">this[tail]</code> 设置为 null 以确保删除该节点；如果有多个节点，则将 <code class=\"language-text\">this[head].previous</code> 设置为 null。注意，列表新的 head 是删除节点前列表中的第二个节点，所以它的 <code class=\"language-text\">previous</code> 指向刚刚被删除的节点。</p>\n<p>在循环之后，您需要确保被删除节点的前一个节点的 <code class=\"language-text\">next</code> 指针和后一个节点的 <code class=\"language-text\">previous</code> 指针。当然，如果要删除的节点是最后一个节点，那么您需要更新 <code class=\"language-text\">this[tail]</code> 指针。</p>\n<h3>创建反向迭代器</h3>\n<p>您可以使用与单向链表中相同的 <code class=\"language-text\">values()</code> 和 <code class=\"language-text\">Symbol.iterator</code> 方法在 JavaScript 中创建可迭代的双向链表。同时，在双向链表中，您还可以创建一个反向迭代器，它从 tail 开始向 head 生成数据。以下是一个 <code class=\"language-text\">reverse()</code> 生成器方法的例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DoublyLinkedList</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// other methods hidden for clarity</span>\n\n    <span class=\"token operator\">*</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">// start by looking at the tail</span>\n        <span class=\"token keyword\">let</span> current <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>tail<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// follow the previous links to the head</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">yield</span> current<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n            current <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>previous<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>双向链表 <code class=\"language-text\">reverse()</code> 生成器方法遵循与单链接列表中的 <code class=\"language-text\">values()</code> 生成器方法相同的算法，除了 <code class=\"language-text\">current</code> 从 <code class=\"language-text\">this[tail]</code> 开始以 <code class=\"language-text\">current.previous</code> 查询直到没有更多节点。创建反向迭代器有助于发现问题和避免为了以不同的顺序访问数据而重新排列节点。</p>\n<h3>其他方法</h3>\n<p>大多数不涉及添加或删除节点的其他方法与单向链表相同。</p>\n<h3>使用类</h3>\n<p>您可以使用类实现链表，如下所示：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DoublyLinkedList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"orange\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// get the second item in the list</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// \"orange\"</span>\n\n<span class=\"token comment\">// print out all items in reverse</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> color <span class=\"token keyword\">of</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// remove the second item in the list</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// \"orange\"</span>\n\n<span class=\"token comment\">// get the new first item in the list</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// \"yellow\"</span>\n\n<span class=\"token comment\">// convert to an array</span>\n<span class=\"token keyword\">const</span> array1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> array2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>list<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> array3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>完整的源代码可以在我 GitHub 上的项目 <a href=\"https://github.com/humanwhocodes/computer-science-in-javascript\">Computer Science in JavaScript</a> 找到。</p>\n<h2>总结：</h2>\n<p>双向链表中每个节点包含一个跟单向链表一样指向后一个节点的 <code class=\"language-text\">next</code> 指针。还包含一个指向前一个节点的 <code class=\"language-text\">previous</code> 指针便于逆向查找。双向链表中添加一个节点的复杂度从O(n)简化到O(1)。</p>\n<p>但是，双向链表其他操作的复杂性与单链表相同，基本都需要遍历列表中很多节点。因此，在存储一些毫无关联的数据（即使是有关联的数据，比如浏览器中的 DOM 节点）上，双向链表并不比内置的 JavaScript <code class=\"language-text\">Array</code> 储存性能好。这些数据可能用另外一种列表形式存储性能更好。</p>\n<p>原文地址：<a href=\"https://humanwhocodes.com/blog/2019/02/computer-science-in-javascript-doubly-linked-lists/\">https://humanwhocodes.com/blog/2019/02/computer-science-in-javascript-doubly-linked-lists/</a></p>","frontmatter":{"title":"JavaScript 中的计算机科学：双向链表","date":"February 27, 2019","description":"在 Javascript 中实现双向链表。"}}},"pageContext":{"slug":"/2019-02-27---computer-science-in-javascript-doubly-linked-lists/","previous":{"fields":{"slug":"/2019-02-24--faster-async-functions-and-promises/"},"frontmatter":{"title":"异步（async）函数和 promise 性能优化"}},"next":{"fields":{"slug":"/2019-03-03---how-to-get-started-with-react-hooks-controlled-forms/"},"frontmatter":{"title":"如何在受控表单组件上使用 React Hooks"}}}}